<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Flashback - Game</title>
  <script src="https://cdn.socket.io/4.6.1/socket.io.min.js"></script>
</head>
<body>
  <h2>Flashback â€“ {{ player }}</h2>
  <div id="question">Waiting for question...</div>
  <div id="answerForm" style="display:none;">
    <input type="text" id="answer" placeholder="Your answer..." />
    <button onclick="submitAnswer()">Submit</button>
  </div>

  <script>
    const socket = io();
    const gameId = "{{ game_id }}";
    const playerName = "{{ player }}";

    socket.emit("join", { game_id: gameId, player: playerName });

    socket.on("display_question", (data) => {
      document.getElementById("question").textContent = data.question;
      document.getElementById("answerForm").style.display = "block";
    });

    function submitAnswer() {
      const answer = document.getElementById("answer").value;
      socket.emit("submit_answer", {
        game_id: gameId,
        player: playerName,
        answer: answer
      });
      document.getElementById("answerForm").style.display = "none";
    }

    socket.on("update_scores", (scores) => {
      alert("Scores updated!");
    });

    socket.on("end_game", () => {
      alert("Game Over!");
    });
  </script>
</body>
</html>
